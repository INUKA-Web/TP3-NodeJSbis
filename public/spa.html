<!doctype html>
<html lang="fr">
    <head>
        <title>Exemple de SPA</title>
        <meta charset="UTF-8">
        <style>
            .active { display: block; }
            .inactive { display: none; }
        </style>
        <script
        src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
        <script>
            function show(hash) {
                $('.active').removeClass('active').addClass('inactive');
                $(hash).removeClass('inactive').addClass('active');
            }

            function disBonjour() {
                const data = {
                    personne: document.getElementById("personne").value
                };
                fetch('/disbonjour-json', {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json; charset=utf-8",
                    },
                    body: JSON.stringify(data),
                })
                .then(res => res.json())
                .then(json => document.getElementById("result").innerHTML = json.message);
            }
        </script>
    </head>

    <body>
        <h1>Ma première SPA</h1>
        <section id='index' class='active'>
            <p>Ceci est la vue d'accueil. Vous pouvez accéder aux autres vues en cliquant sur les liens suivants :</p>
            <ul>
                <li><a href='#bonjour'>La page qui dit bonjour</a></li>
                <li><a href='#vue2'>Vue 2</a></li>
            </ul>
        </section>
        <section id='bonjour' class='inactive'>
            <h2>Dites bonjour à qui vous voulez</h2>
            
            <p>
                Entrez le nom de la personne
                <input type="text" id="personne">
                <button onclick="disBonjour()">Envoyer</button>
            </p>
            <hr>
            <h2>Résultat</h2>
            <h3 id="result"></h3>

            <p>Retour à la <a href='#index'>vue accueil</a>.</p>
        </section>
        <section id='vue2' class='inactive'>
            <p>Ceci est la vue 2. Elle correspond à une autre fonctionnalité de l'application.</p>
            <p>Retour à la <a href='#index'>vue accueil</a>.</p>
        </section>
        <script>
            window.addEventListener('hashchange', () => { show(window.location.hash); });
        </script>
    </body>
</html>